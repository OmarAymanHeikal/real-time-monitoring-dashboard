<div class="dashboard">
  <h1>Monitoring Dashboard</h1>
  
  <!-- Stats Cards -->
  <mat-grid-list cols="4" rowHeight="120px" gutterSize="16px" class="stats-grid">
    <mat-grid-tile>
      <mat-card class="stat-card">
        <mat-card-content>
          <mat-icon color="primary">dns</mat-icon>
          <div class="stat-value">{{ stats.totalServers }}</div>
          <div class="stat-label">Total Servers</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stat-card success">
        <mat-card-content>
          <mat-icon>check_circle</mat-icon>
          <div class="stat-value">{{ stats.activeServers }}</div>
          <div class="stat-label">Active Servers</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stat-card warning">
        <mat-card-content>
          <mat-icon>warning</mat-icon>
          <div class="stat-value">{{ stats.activeAlerts }}</div>
          <div class="stat-label">Active Alerts</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stat-card info">
        <mat-card-content>
          <mat-icon>memory</mat-icon>
          <div class="stat-value">{{ stats.avgCpuUsage | number:'1.0-1' }}%</div>
          <div class="stat-label">Avg CPU Usage</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>

  <!-- Charts Row -->
  <div class="charts-row">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>CPU Usage - Real-time</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <canvas baseChart
            [data]="cpuChartData"
            [options]="chartOptions"
            type="line">
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Memory Usage - Real-time</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <canvas baseChart
            [data]="memoryChartData"
            [options]="chartOptions"
            type="line">
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card small">
      <mat-card-header>
        <mat-card-title>Server Status</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <canvas baseChart
            [data]="serverStatusChartData"
            [options]="doughnutChartOptions"
            type="doughnut">
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Activity -->
  <mat-card class="activity-card">
    <mat-card-header>
      <mat-card-title>Recent Metrics</mat-card-title>
      <button mat-button routerLink="/servers" color="primary">View All</button>
    </mat-card-header>
    <mat-card-content>
      <div class="metrics-list">
        @if (recentMetrics.length === 0) {
          <p class="no-data">No recent metrics available</p>
        }
        @for (metric of recentMetrics.slice(0, 5); track metric.timestamp) {
          <div class="metric-item">
            <div class="metric-info">
              <strong>{{ metric.serverName }}</strong>
              <span class="timestamp">{{ metric.timestamp | date:'short' }}</span>
            </div>
            <div class="metric-values">
              <span class="metric-badge" [class.high]="metric.cpuUsage > 80">
                CPU: {{ metric.cpuUsage | number:'1.0-1' }}%
              </span>
              <span class="metric-badge" [class.high]="metric.memoryUsage > 80">
                Memory: {{ metric.memoryUsage | number:'1.0-1' }}%
              </span>
              <span class="metric-badge status" [class]="metric.status.toLowerCase()">
                {{ metric.status }}
              </span>
            </div>
          </div>
        }
      </div>
    </mat-card-content>
  </mat-card>
</div>
